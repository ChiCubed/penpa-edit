/*! @license candle.js v0.9.0-beta1 (c) 2011-2026 sabo2, MIT license
 *   https://bitbucket.org/sabo2/candle */
var Candle=function(t){var e={};function i(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(r,s,function(e){return t[e]}.bind(null,s));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){t.exports=i(2)},function(t,e){if("undefined"==typeof canvas){var i=new Error("Cannot find module 'canvas'");throw i.code="MODULE_NOT_FOUND",i}t.exports=canvas},function(t,e,i){"use strict";function r(){if(this.parentNode){var t=this.parentNode._children,e=t.indexOf(this);return e>=0?t[e+1]:null}}function s(t){t.parentNode&&t.parentNode.removeChild(t),this._children.push(t),t.parentNode=this}function n(t){var e=this._children.indexOf(t);return e>=0&&(this._children.splice(e,1),t.parentNode=null),t}function h(t,e){t.parentNode&&t.parentNode.removeChild(t);var i=-1;e&&(i=this._children.indexOf(e)),-1===i?this.appendChild(t):this._children.splice(i,0,t)}function a(t,e){t=(t=(t=t.replace(/\*/g,"[^/]+")).replace(/([\w#]+|\*)/g,"[^/]*$1[^/]*")).replace(/\s+/g,"/([^/]+/)?"),t=new RegExp(t+"[^/]*$");for(var i=this.firstChild?[this.firstChild]:[],r=[];i.length>0;){var s=i.pop();if(c(s,this).match(t)&&(r.push(s),e))break;s.nextSibling&&i.push(s.nextSibling),s.childNodes.length>0&&i.push(s.firstChild)}return r}function l(t){return a.call(this,t,!1)}function o(t){return a.call(this,t,!0)[0]||null}function c(t,e){for(var i="";t&&t!==e;){var r="";t.createElement||(r=t.tagName+(t._attr.id?"#"+t._attr.id:"")),i=r+(i?"/"+i:""),t=t.parentNode}return i}function d(){return this._children.reduce((function(t,e,i,r){return t+e.outerHTML}),"")}function u(){var t=this.tagName,e="",i="";for(var r in this._attr)e+=" "+r+'="'+this._attr[r]+'"';for(var s in this.style)i+=s+":"+this.style[s]+";";return i&&(e+=' style="'+i+'"'),0===this._children.length?"<"+t+e+"/>":"<"+t+e+">"+this.innerHTML+"</"+t+">"}function p(t,e){for(;;){var i=e.match(/^\s*([^:]+?):([^;]+?);?/);if(!i)break;t.style[i[1]]=i[2],e=RegExp["$'"]}}function f(t,e){var i=[t];return e.split(/(<.+?>)/g).forEach((function(t){var e=i[i.length-1],r=null;if(!t.match(/^<\?xml/))if(t.match(/^<\w/)){var s=t.match(/<(\w+)\s*(.*)\/?>/);(function(t,e){for(;;){var i=e.match(/^\s*([\w\-\:]+)(\=)?(?:['"](.+?)['"]|([^\s]+))?\s*/);if(!i)break;var r=i[1],s=i[3]||i[4]||"";e=RegExp["$'"],r&&("="===i[2]?"style"!==r?t.setAttribute(r,s):t.style=p(t,s):t.setAttribute(r,!0))}})(r=new g(s[1]),s[2]),e.appendChild(r),t.match(/\/>$/)||i.push(r)}else if(t.match(/^<\//))i.pop();else{if(t.match(/^[\s\t\r\n]*$/))return;e.appendChild(new v(t))}})),t}i.r(e);class g{constructor(t){this.tagName=t,this._attr={},this.style={},this._children=[],this.parentNode=null}get nodeType(){return 1}get nodeName(){return this.tagName}get firstChild(){return this._children[0]}get lastChild(){return this._children[this._children.length-1]}get childNodes(){return this._children}get nextSibling(){return r.call(this)}appendChild(t){s.call(this,t)}removeChild(t){return n.call(this,t)}insertBefore(t,e){h.call(this,t,e)}setAttribute(t,e){this._attr[t]=e}setAttributeNS(t,e,i){this._attr[e]=i}getAttribute(t){return t in this._attr?this._attr[t]:null}getAttributeNS(t,e){return e in this._attr?this._attr[e]:null}removeAttribute(t){delete this._attr[t]}get id(){return this._attr.id||""}get innerHTML(){return d.call(this)}get outerHTML(){return u.call(this)}get textContent(){return this.innerHTML.replace(/<.+?>/g,"")}set textContent(t){this._children.forEach(t=>this.removeChild(t)),this.appendChild(new v(t))}querySelector(t){return o.call(this,t)}querySelectorAll(t){return l.call(this,t)}}class v{constructor(t){this.data=t,this._attr={},this.parentNode=null}get nodeType(){return 3}get nodeName(){return"#text"}get firstChild(){return null}get childNodes(){return[]}get nextSibling(){return r.call(this)}get outerHTML(){return this.data}}class m{constructor(){this._children=[]}get nodeType(){return 9}get nodeName(){return"#document"}createElement(t){return new g(t)}createElementNS(t,e){return new g(e)}createTextNode(t){return new v(t)}get firstChild(){return this._children[0]}get lastChild(){return this._children[this._children.length-1]}get childNodes(){return this._children}appendChild(t){s.call(this,t)}removeChild(t){return n.call(this,t)}insertBefore(t,e){h.call(this,t,e)}get innerHTML(){return d.call(this)}get outerHTML(){return d.call(this)}querySelector(t){return o.call(this,t)}querySelectorAll(t){return l.call(this,t)}getElementById(t){return this.querySelector("#"+t)}}var b=function(){};b.prototype.serializeToString=function(t){return t.outerHTML};var y=function(){};y.prototype.parseFromString=function(t,e){return f(new m,t)};var x={document:new m,XMLSerializer:b,DOMParser:y},A={node:"object"==typeof process,browser:"object"==typeof document&&"object"==typeof window&&"object"==typeof location},S="undefined"!=typeof document?document:x.document,w=null,_={document:S,init(){if(!w&&"undefined"!=typeof window){var t=S.createElement("div");t.style.display="inline",t.style.position="absolute",t.style.top="0px",t.style.left="-9000px",t.innerHTML="",S.body.appendChild(t),void 0!==t.offsetHeight?w=t:S.body.removeChild(t)}},getoffsetHeight(t,e){var i;if(e.match(/(.+\s)?([0-9]+)px (.+)$/))i=+RegExp.$2;else if(w){var r=w;r.style.font=e,r.style.lineHeight="100%",r.innerHTML=t,i=r.offsetHeight}return i},getRectSize:t=>({width:t.offsetWidth||t.clientWidth||0,height:t.offsetHeight||t.clientHeight||0})},L=-1;class C{constructor(t){this.fillStyle="black",this.strokeStyle="black",this.lineWidth=1,this.font="14px system",this.textAlign="center",this.textBaseline="middle",this.canvas=t,this.canvasid="_candle_"+ ++L,this.child=null,this.enableTextLengthWA=!1,this.canvas.getContext=t=>this,this.use={}}init(){this.initElement(),this.initFunction(),this.initLayer()}rectcenter(t,e,i,r){this.rect(t-i,e-r,2*i,2*r)}fillRectCenter(t,e,i,r){this.fillRect(t-i,e-r,2*i,2*r)}strokeRectCenter(t,e,i,r){this.strokeRect(t-i,e-r,2*i,2*r)}shapeRectCenter(t,e,i,r){this.shapeRect(t-i,e-r,2*i,2*r)}vhide(){}}var k,T=_.document,E=A.browser,P=!(void 0===T||!T.createElementNS||"object"==typeof window&&window.opera),z="http://www.w3.org/2000/svg",R="http://www.w3.org/1999/xlink",M=(k=E&&navigator.userAgent||"").match(/Trident\//)||k.match(/Safari\//)&&k.match(/Edge\//);function N(t){return T.createElementNS(z,t)}var D=2*Math.PI,G={left:"start",center:"middle",right:"end"},B=(()=>{var t="undefined"!=typeof navigator&&navigator.userAgent||"";return t.match(/Chrome/)?{"candle-top":-.72,top:-.95,hanging:-.72,middle:-.35,alphabetic:0,bottom:.25}:t.match(/AppleWebKit/)?{"candle-top":-.7,top:-.9,hanging:-.9,middle:-.35,alphabetic:0,bottom:.25}:t.match(/Trident/)?{"candle-top":-.74,top:-1.02,hanging:-1.02,middle:-.32,alphabetic:0,bottom:.45}:t.match(/Win/)?{"candle-top":-.7,top:-.85,hanging:-.85,middle:-.34,alphabetic:0,bottom:.15}:{"candle-top":-.76,top:-.9,hanging:-.9,middle:-.38,alphabetic:0,bottom:.08}})();var O={WrapperClass:class extends C{constructor(t){super(t),this.use=this.getTypeList(),this.lineDash=null,this.transform="",this.stateStack=[],this.vid="",this.elements={},this._textcache={},this.isGroup=!1,this.groupSize={},this.textGroupSize={},this.target=null,this.layers={},this._layerid="",this.cpath=[],this.lastpath="",this.freezepath=!1,this.enableTextLengthWA=M}getTypeList(){return{}}initElement(){E&&(this.canvas.style.overflow="hidden");var t=_.getRectSize(this.canvas),e=this.child=T.createElementNS(z,"svg");e.setAttribute("xmlns",z),e.setAttribute("xmlns:xlink",R),e.setAttribute("font-size","10px"),e.setAttribute("font-family","sans-serif"),e.setAttribute("width",t.width),e.setAttribute("height",t.height),e.setAttribute("viewBox",[0,0,t.width,t.height].join(" ")),this.canvas.appendChild&&this.canvas.appendChild(e)}initFunction(){var t='<?xml version="1.0" encoding="UTF-8"?>\n';function e(t){return(t.outerHTML||(new x.XMLSerializer).serializeToString(t)).replace(/^<\?xml.+?\?>[\r\n]*/,"")}var i=this.child;this.canvas.toDataURL=function(t,r){return"data:image/svg+xml;base64,"+(s=e(i),E?window.btoa(s):Buffer.isBuffer(s)?s.toString("base64"):new Buffer(s.toString(),"binary").toString("base64"));var s},this.canvas.toBlob=function(r,s,n){r(new Blob([t+e(i)],{type:"image/svg+xml"}))},this.canvas.toBuffer=function(r,s){return t+e(i)}}initLayer(){this.setLayer();var t=_.getRectSize(this.canvas);this.rect(0,0,t.width,t.height),this.addVectorElement(!1,!1)}clear(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]){for(var t=this.child,e=t.firstChild;e;)t.removeChild(e),e=t.firstChild;this.vid="",this.groupSize={},this.isGroup=!1,this.elements={},this.layers={},this.target=this.child,this.setLayer(),this._textcache={}}else for(var i=[this.child],r=this.child.firstChild;r;){for(;r&&"G"===r.nodeName.toUpperCase();)i.push(r),r=r.firstChild;if(r){var s=r.nextSibling;"none"===r.getAttribute("display")?r.hasAttribute("data-vid")||i.at(-1).removeChild(r):this.hide(r),r=s}for(;!r&&i.length>0;)r=i.pop().nextSibling}}setLayer(t,e){if(e=e||{},this.vid="",this.isGroup=!1,t){var i=this.layers[t];i||(i=this.layers[t]=N("g"),this.child.appendChild(i)),this._layerid=t,this.target=i}else this._layerid="",this.target=this.child;e.rendering&&this.setRendering(e.rendering),this.freezepath=!!e&&e.freeze}set layer(t){this.setLayer(t)}get layer(){return this._layerid}setRendering(t){this.target.setAttribute("shape-rendering",t)}changeSize(t,e){E&&(this.canvas.style.width=t+"px",this.canvas.style.height=e+"px");var i=this.child;i.setAttribute("width",t),i.setAttribute("height",e);var r=i.getAttribute("viewBox").split(/ /);i.setAttribute("viewBox",[r[0],r[1],t,e].join(" "))}save(){var t={};for(var e of["transform","font","textAlign","textBaseline","fillStyle","strokeStyle","lineWidth","lineDash","lineDashOffset","lineCap"])t[e]=this[e];this.stateStack.push(t)}restore(){var t=this.stateStack.pop();for(var e in t)this[e]=t[e]}translate(t,e){this.transform+=" translate(".concat(t," ").concat(e,")")}rotate(t){this.transform+=" rotate(".concat(180*t/Math.PI,")")}scale(t,e){this.transform+=" scale(".concat(t," ").concat(e,")")}beginPath(){this.cpath=[],this.lastpath=""}closePath(){this.cpath.push("z"),this.lastpath="z"}moveTo(t,e){this.cpath.push("M",t,e),this.lastpath="M"}lineTo(t,e){"L"!==this.lastpath&&this.cpath.push("L"),this.cpath.push(t,e),this.lastpath="L"}rect(t,e,i,r){this.cpath.push("M",t,e,"L",t+i,e,t+i,e+r,t,e+r,"z"),this.lastpath="z"}arc(t,e,i,r,s,n){var h,a,l,o,c=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];s-r>=D?(h=t+i,a=e,l=t+i,o=e):(h=t+i*Math.cos(r),a=e+i*Math.sin(r),l=t+i*Math.cos(s),o=e+i*Math.sin(s)),s-r>=D&&(a+=.125);var d=r>s!=Math.abs(s-r)>Math.PI,u=n^d?1:0,p=0===u^d?1:0;this.cpath.push(c?"M":"L",h,a,"A",i,i,0,u,p,l,o),this.lastpath="A"}fill(){this.addVectorElement(!0,!1)}stroke(){this.addVectorElement(!1,!0)}shape(){this.addVectorElement(!0,!0)}fillRect(t,e,i,r){var s=this.cpath;this.cpath=[],this.rect(t,e,i,r),this.addVectorElement(!0,!1),this.cpath=s}strokeRect(t,e,i,r){var s=this.cpath;this.cpath=[],this.rect(t,e,i,r),this.addVectorElement(!1,!0),this.cpath=s}shapeRect(t,e,i,r){var s=this.cpath;this.cpath=[],this.rect(t,e,i,r),this.addVectorElement(!0,!0),this.cpath=s}setLineDash(t){t&&t.length>0?this.lineDash=t.join(" "):this.lineDash=null}setLinePath(){for(var t=arguments,e=t.length,i=e-(1|e?1:2),r=[],s=0;s<i;s+=2)r[s>>1]=[t[s],t[s+1]];this.beginPath(),this.setLinePath_com.call(this,r),t[e-1]&&this.cpath.push("z")}setOffsetLinePath(){for(var t=arguments,e=t.length,i=e-(1|e?1:2),r=[],s=0;s<i-2;s+=2)r[s>>1]=[t[s+2]+t[0],t[s+3]+t[1]];this.beginPath(),this.setLinePath_com.call(this,r),t[e-1]&&this.cpath.push("z")}setLinePath_com(t){for(var e=0,i=t.length;e<i;e++)this.cpath.push(0===e?"M":"L"),this.cpath.push(t[e][0],t[e][1])}strokeLine(t,e,i,r){var s=this.cpath;this.cpath=["M",t,e,"L",i,r],this.addVectorElement(!1,!0),this.cpath=s}strokeDashedLine(t,e,i,r,s){var n=this.cpath;this.cpath=["M",t,e,"L",i,r],this.addVectorElement(!1,!0).setAttribute("stroke-dasharray",s.join(" ")),this.cpath=n}strokeCross(t,e,i){var r=this.cpath;this.cpath=["M",t-i,e-i,"L",t+i,e+i,"M",t-i,e+i,"L",t+i,e-i],this.addVectorElement(!1,!0),this.cpath=r}fillCircle(t,e,i){var r=this.cpath;this.cpath=[],this.arc(t,e,i,0,D,!1),this.cpath.push("z"),this.addVectorElement(!0,!1),this.cpath=r}strokeCircle(t,e,i){var r=this.cpath;this.cpath=[],this.arc(t,e,i,0,D,!1),this.cpath.push("z"),this.addVectorElement(!1,!0),this.cpath=r}shapeCircle(t,e,i){var r=this.cpath;this.cpath=[],this.arc(t,e,i,0,D,!1),this.cpath.push("z"),this.addVectorElement(!0,!0),this.cpath=r}getDefsElement(){var t=this.child.querySelector("defs");return t||(t=T.createElementNS(z,"defs"),this.child.insertBefore(t,this.child.firstChild||null)),t}getImageElement(t){for(var e=this.getDefsElement(),i=null,r=e.querySelectorAll("image"),s=0;s<r.length;s++)if(r[s].getAttributeNS(R,"href")===t.src){i=r[s];break}return i||((i=N("image")).setAttribute("id",(i.ownerDocument?this.canvasid+"_":"")+"img"+r.length),i.setAttribute("width",t.width),i.setAttribute("height",t.height),i.setAttributeNS(R,"xlink:href",t.src),e.appendChild(i)),i}getImageSymbol(t,e,i,r,s){for(var n=this.getDefsElement(),h=[e,i,r,s].join(" "),a=null,l=n.querySelectorAll("symbol"),o=0;o<l.length;o++)if(l[o].getAttribute("viewBox")===h){a=l[o];break}if(!a){(a=T.createElementNS(z,"symbol")).setAttribute("id",(a.ownerDocument?this.canvasid+"_":"")+"symimg"+l.length),a.setAttribute("viewBox",h);var c=T.createElementNS(z,"use");c.setAttributeNS(R,"xlink:href","#"+this.getImageElement(t).getAttribute("id")),a.appendChild(c),n.appendChild(a)}return a}fillText(t,e,i,r){var s=this.reify_vid_text(),n=s?this.elements[s]:null;if(t&&this.fillStyle&&"none"!==this.fillStyle){var h=this.fillText_main(n,t,e,i,"");!n&&s&&(this.elements[s]=h,h.setAttribute("data-vid",s))}else n&&this.hide(n);this._step_vid(!0)}fillText_main(t,e,i,r,s){var n=this.reify_vid_text(),h=!t,a=n&&this._textcache[n]||{};if(h?t=N("text"):this.show(t),t.getAttribute("fill")!==this.fillStyle&&t.setAttribute("fill",this.fillStyle),a.x!==i||a.y!==r||a.ml!==s||a.ta!==this.textAlign||a.tb!==this.textBaseline||a.font!==this.font){var l=r-_.getoffsetHeight(e,this.font)*B[this.textBaseline.toLowerCase()],o=G[this.textAlign.toLowerCase()];t.getAttribute("x")!==i&&t.setAttribute("x",i),t.getAttribute("y")!==l&&t.setAttribute("y",l),t.getAttribute("text-anchor")!==o&&t.setAttribute("text-anchor",o),(t.getAttribute("textLength")||"")!==s&&(s?(t.setAttribute("textLength",s),t.setAttribute("lengthAdjust","spacingAndGlyphs")):(t.removeAttribute("textLength"),t.removeAttribute("lengthAdjust"))),a.x=i,a.y=r,a.ml=s,a.ta=this.textAlign,a.tb=this.textBaseline}if(a.font!==this.font){if(this.font.match(/(.+\s)?([0-9.]+)px (.+)$/)){var c=RegExp.$1,d=RegExp.$2,u=RegExp.$3;t.setAttribute("font-size",d),u.match(/^sans\-serif$/i)?t.removeAttribute("font-family"):t.setAttribute("font-family",u),c.match(/(italic|oblique)/)?t.setAttribute("font-style",RegExp.$1):t.removeAttribute("font-style"),c.match(/(bold|bolder|lighter|[1-9]00)/)?t.setAttribute("font-weight",RegExp.$1):t.removeAttribute("font-weight")}else t.setAttribute("font",this.font);a.font=this.font}var p=this.transform;if(a.transform!==p&&(p?t.setAttribute("transform",p):t.removeAttribute("transform"),a.transform=p),t.textContent!==e&&(t.textContent=e),n&&(this._textcache[n]=a),h&&this.target.appendChild(t),M&&this.enableTextLengthWA&&("center"===a.ta||"right"===a.ta)&&s){t.removeAttribute("textLength");var f=t.getBoundingClientRect();t.setAttribute("x",a.x+(f.width-s)/("center"===a.ta?2:1)),t.setAttribute("textLength",s)}return t}text(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4,s=parseFloat(this.font.split("px")[0]);this.fillText(t,e,i+.28*s,r)}arrow(t,e,i,r,s){var n=i-t,h=r-e,a=Math.sqrt(n*n+h*h),l=h/a,o=n/a,c=[];c.push(0,0);for(var d=0;d<s.length;d+=2){var u=s[d],p=s[d+1];c.push(u<0?a+u:u,p)}c.push(a,0);for(var f=s.length;f>0;f-=2){var g=s[f-2],v=s[f-1];c.push(g<0?a+g:g,-v)}c.push(0,0);for(var m=0;m<c.length;m+=2){var b=c[m]*o-c[m+1]*l+t,y=c[m]*l+c[m+1]*o+e;0===m?this.moveTo(b,y):this.lineTo(b,y)}}drawImage(t,e,i,r,s,n,h,a,l){var o=this.reify_vid(),c=o?this.elements[o]:null;if(t){void 0===r&&(r=t.width,s=t.height),void 0===n&&(n=e,e=0,h=i,i=0,a=r,l=s);var d=this.drawImage_main(c,t,e,i,r,s,n,h,a,l);!c&&o&&(this.elements[o]=d,d.setAttribute("data-vid",o))}else c&&this.hide(c);this._step_vid()}drawImage_main(t,e,i,r,s,n,h,a,l,o){var c=!t;c?t=N("use"):this.show(t);var d=this.getImageSymbol(e,i,r,s,n).getAttribute("id");return t.getAttribute("x")!==h&&t.setAttribute("x",h),t.getAttribute("y")!==a&&t.setAttribute("y",a),t.getAttribute("width")!==l&&t.setAttribute("width",l),t.getAttribute("height")!==o&&t.setAttribute("height",o),t.getAttributeNS(R,"xlink:href")!=="#"+d&&t.setAttributeNS(R,"xlink:href","#"+d),c&&this.target.appendChild(t),t}addVectorElement(t,e){t=t&&!!this.fillStyle&&"none"!==this.fillStyle,e=e&&!!this.strokeStyle&&"none"!==this.strokeStyle;var i=this.reify_vid(),r=i?this.elements[i]:null,s=null;return t||e?(s=this.addVectorElement_main(r,t,e),!r&&i&&(this.elements[i]=s,s.setAttribute("data-vid",i))):r&&this.hide(r),this._step_vid(),s}addVectorElement_main(t,e,i){var r=!t;if(r?((t=N("path")).setAttribute("fill","none"),t.setAttribute("stroke","none")):this.show(t),!this.freezepath||r){var s=this.cpath.join(" "),n=i?this.lineWidth:null,h=i?this.lineDash:null,a=i?this.lineDashOffset:null,l=i?this.lineCap:null;t.getAttribute("d")!==s&&t.setAttribute("d",s),t.getAttribute("stroke-width")!==n&&t.setAttribute("stroke-width",n),t.getAttribute("stroke-dasharray")!==h&&t.setAttribute("stroke-dasharray",h),t.getAttribute("stroke-dashoffset")!==a&&t.setAttribute("stroke-dashoffset",a),t.getAttribute("stroke-linecap")!==l&&t.setAttribute("stroke-linecap",l)}var o=e?this.fillStyle:"none",c=i?this.strokeStyle:"none";t.getAttribute("fill")!==o&&t.setAttribute("fill",o),t.getAttribute("stroke")!==c&&t.setAttribute("stroke",c);var d=this.transform;return t.getAttribute("transform")!==d&&(d?t.setAttribute("transform",d):t.removeAttribute("transform")),r&&this.target.appendChild(t),t}reify_vidGroup(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return"".concat(t,"[").concat(e,"]").concat(i?".txt":"")}reify_vid(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t=t||this.vid,this.isGroup&&(t=this.reify_vidGroup(t,this.groupSize[t])),t}reify_vid_text(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t=t||this.vid,this.isGroup&&(t=this.reify_vidGroup(t,this.textGroupSize[t],!0)),t}begin_vidGroup(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t&&(this.vid=t),this.isGroup=!0,this.oldGroupSize=this.groupSize[this.vid]||0,this.oldTextGroupSize=this.textGroupSize[this.vid]||0,this.groupSize[this.vid]=0,this.textGroupSize[this.vid]=0}end_vidGroup(){for(var t=this.groupSize[this.vid];t<this.oldGroupSize;++t)this.vhide(this.reify_vidGroup(this.vid,t));for(var e=this.textGroupSize[this.vid];e<this.oldTextGroupSize;++e)this.vhide(this.reify_vidGroup(this.vid,e,!0));this.oldGroupSize=0,this.oldTextGroupSize=0,this.vid="",this.isGroup=!1}_step_vid(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isGroup?t?this.textGroupSize[this.vid]+=1:this.groupSize[this.vid]+=1:this.vid=""}vhideGroup(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t=t||this.vid;for(var e=0;e<this.groupSize[t];++e)this.vhide(this.reify_vidGroup(t,e));for(var i=0;i<this.textGroupSize[t];++i)this.vhide(this.reify_vidGroup(t,i,!0))}vhide(t){var e=this.elements[t||this.vid];e&&this.hide(e)}show(t){t.removeAttribute("display")}hide(t){t.setAttribute("display","none")}},wrapperType:"svg",isWrapperEnable:P},j=_.document,W=A.browser,H=null,I=(()=>{if(W){var t=j.createElement("canvas");return!!t.getContext&&(!t.probablySupportsContext||t.probablySupportsContext("2d"))}try{H=i(1)}catch(t){return!1}return!0})(),$=2*Math.PI,V=(()=>{var t="undefined"!=typeof navigator&&navigator.userAgent||"";return t.match(/Chrome/)?-.72:t.match(/AppleWebKit/)?-.7:t.match(/Trident/)?-.74:t.match(/Win/)?-.7:-.76})();var q={WrapperClass:class extends C{constructor(t){super(t),this.context=null,this.use=this.getTypeList(),this.currentLayerId="",this.isedgearray={"":!1},this.isedge=!1}getTypeList(){return{}}setkey(t){return this}hidekey(t){return this}release(t){return this}initElement(){var t=this.child=W?j.createElement("canvas"):new H;W&&(this.canvas.style.overflow="hidden");var e=_.getRectSize(this.canvas);t.width=e.width,t.height=e.height,W&&(t.style.width=e.width+"px",t.style.height=e.height+"px",this.canvas.appendChild(t)),this.context=t.getContext("2d")}initFunction(){function t(t){return W?window.atob(t):new Buffer(RegExp.$2,"base64").toString("binary")}var e=this.child;this.canvas.toDataURL=function(t,i){return e.toDataURL(t||void 0,i)},this.canvas.toBlob=function(i,r,s){if("function"==typeof e.toBlob)e.toBlob(i,r,s);else{e.toDataURL(r||void 0,s).match(/data:(.*);base64,(.*)/);for(var n=t(RegExp.$2),h=n.length,a=new Uint8Array(h),l=0;l<h;l++)a[l]=n.charCodeAt(l);i(new Blob([a.buffer],{type:RegExp.$1}))}},this.canvas.toBuffer=function(i,r){var s,n=e.toDataURL(i||void 0,r).replace(/^data:image\/\w+?;base64,/,"");if(A.node)return new Buffer(n,"base64");if("undefined"!=typeof Uint8Array){var h=t(n);s=new Uint8Array(h.length);for(var a=0;a<h.length;a++)s[a]=h.charCodeAt(a)}else s=t(n);return s}}initLayer(){this.setLayer()}clear(){if(this.setProperties(!0,!0),W){var t=_.getRectSize(this.canvas);this.context.clearRect(0,0,t.width,t.height)}}setLayer(t,e){var i=this.currentLayerId=t||"";this.isedge=this.isedgearray[void 0!==this.isedgearray[i]?i:""],this.setEdgeStyle(),(e=e||{}).rendering&&this.setRendering(e.rendering)}setEdgeStyle(){if(W){var t=this.canvas.style;"imageRendering"in t&&(t.imageRendering="",this.isedge&&(t.imageRendering="pixelated",t.imageRendering||(t.imageRendering="-webkit-optimize-contrast"),t.imageRendering||(t.imageRendering="-moz-crisp-edges"),t.imageRendering||(t.imageRendering="-o-crisp-edges")))}}set layer(t){this.setLayer(t)}get layer(){return this.currentLayerId}setRendering(t){this.isedge=this.isedgearray[this.currentLayerId]="crispEdges"===t,this.setEdgeStyle()}changeSize(t,e){if(W){var i=this.canvas;i.style.width=t+"px",i.style.height=e+"px"}var r=this.child;if(W){var s=parseInt(r.style.left),n=parseInt(r.style.top);t+=s<0?-s:0,e+=n<0?-n:0,r.style.width=t+"px",r.style.height=e+"px"}r.width=t,r.height=e}save(){this.context.save()}restore(){this.context.restore()}translate(t,e){this.context.translate(t,e)}scale(t,e){this.context.scale(t,e)}rotate(t){this.context.rotate(t)}setProperties(t,e){t=t&&!!this.fillStyle&&"none"!==this.fillStyle,e=e&&!!this.strokeStyle&&"none"!==this.strokeStyle;var i=this.context;return t&&(i.fillStyle=this.fillStyle),e&&(i.strokeStyle=this.strokeStyle),i.lineCap=this.lineCap,i.lineDashOffset=this.lineDashOffset,i.lineWidth=this.lineWidth,i.font=this.font,i.textAlign=this.textAlign,i.textBaseline=this.textBaseline,t||e}beginPath(){this.context.beginPath()}closePath(){this.context.closePath()}moveTo(t,e){this.context.moveTo(t,e)}lineTo(t,e){this.context.lineTo(t,e)}rect(t,e,i,r){this.context.rect(t,e,i,r)}arc(t,e,i,r,s,n){this.context.arc(t,e,i,r,s,n)}fill(){this.setProperties(!0,!1)&&this.context.fill()}stroke(){this.setProperties(!1,!0)&&this.context.stroke()}shape(){if(this.setProperties(!0,!0)){var t=this.context;this.fillStyle&&"none"!==this.fillStyle&&t.fill(),this.strokeStyle&&"none"!==this.strokeStyle&&t.stroke()}}fillRect(t,e,i,r){this.setProperties(!0,!1)&&this.context.fillRect(t,e,i,r)}strokeRect(t,e,i,r){this.setProperties(!1,!0)&&this.context.strokeRect(t,e,i,r)}shapeRect(t,e,i,r){if(this.setProperties(!0,!0)){var s=this.context;this.fillStyle&&"none"!==this.fillStyle&&s.fillRect(t,e,i,r),this.strokeStyle&&"none"!==this.strokeStyle&&s.strokeRect(t,e,i,r)}}setLineDash(t){this.context.setLineDash(t)}setLinePath(){for(var t=arguments,e=t.length,i=e-(1|e?1:2),r=[],s=0;s<i;s+=2)r[s>>1]=[t[s],t[s+1]];this.context.beginPath(),this.setLinePath_com.call(this,r),t[e-1]&&this.context.closePath()}setOffsetLinePath(){for(var t=arguments,e=t.length,i=e-(1|e?1:2)-2,r=[],s=0;s<i;s+=2)r[s>>1]=[t[s+2]+t[0],t[s+3]+t[1]];this.context.beginPath(),this.setLinePath_com.call(this,r),t[e-1]&&this.context.closePath()}setLinePath_com(t){for(var e=0,i=t.length;e<i;e++){var r=t[e];0===e?this.context.moveTo(r[0],r[1]):this.context.lineTo(r[0],r[1])}}strokeLine(t,e,i,r){if(this.setProperties(!1,!0)){var s=this.context;s.beginPath(),s.moveTo(t,e),s.lineTo(i,r),s.stroke()}}strokeDashedLine(t,e,i,r,s){this.strokeDashedLine=this.context.setLineDash?function(t,e,i,r,s){var n=this.context;this.setProperties(!1,!0)&&(n.beginPath(),n.moveTo(t,e),n.lineTo(i,r),n.setLineDash(s),n.stroke(),n.setLineDash([]))}:function(t,e,i,r,s){s.length%2==1&&(s=s.concat(s));var n=Math.sqrt((i-t)*(i-t)+(r-e)*(r-e)),h=0,a=0,l=null,o=null;if(t!==i&&(o=(l=(r-e)/(i-t))*l+1),this.setProperties(!1,!0)){var c=this.context;for(c.beginPath(),c.moveTo(t,e);h<n;){var d,u;if(null!==l){var p=Math.sqrt(h*h/o);d=t+p,u=e+l*p}else d=t,u=e+h;0==(1&a)?c.moveTo(d,u):c.lineTo(d,u),h+=s[a],++a>=s.length&&(a=0)}c.stroke()}},this.strokeDashedLine(t,e,i,r,s)}strokeCross(t,e,i){if(this.setProperties(!1,!0)){var r=this.context;r.beginPath(),r.moveTo(t-i,e-i),r.lineTo(t+i,e+i),r.moveTo(t-i,e+i),r.lineTo(t+i,e-i),r.stroke()}}fillCircle(t,e,i){if(this.setProperties(!0,!1)){var r=this.context;r.beginPath(),r.arc(t,e,i,0,$,!1),r.fill()}}strokeCircle(t,e,i){if(this.setProperties(!1,!0)){var r=this.context;r.beginPath(),r.arc(t,e,i,0,$,!1),r.stroke()}}shapeCircle(t,e,i){if(this.setProperties(!0,!0)){var r=this.context;r.beginPath(),r.arc(t,e,i,0,$,!1),this.fillStyle&&"none"!==this.fillStyle&&r.fill(),this.strokeStyle&&"none"!==this.strokeStyle&&r.stroke()}}fillText(t,e,i,r){t&&this.setProperties(!0,!1)&&("candle-top"===this.textBaseline&&(i-=_.getoffsetHeight(t,this.font)*V,this.context.textBaseline="alphabetic"),r?this.context.fillText(t,e,i,r):this.context.fillText(t,e,i))}text(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4,s=parseFloat(this.font.split("px")[0]);this.fillText(t,e,i+.28*s,r)}arrow(t,e,i,r,s){this.context.arrow(t,e,i,r,s)}drawImage(){arguments[0]&&this.context.drawImage.apply(this.context,arguments)}},wrapperType:"canvas",isWrapperEnable:I},U=[],F=[],X={},K=function(){for(var t=[],e=256;e<512;e++)t[e-256]=e.toString(16).substr(1);return t}(),J={version:"0.9.0-beta1",env:A,document:_.document,XMLSerializer:"undefined"!=typeof XMLSerializer?XMLSerializer:x.XMLSerializer,DOMParser:"undefined"!=typeof DOMParser?DOMParser:x.DOMParser,enable:{},current:"",select:function(t){return!!this.enable[t]&&(this.current=t,!0)},parse:function(t){if(!U[t])if("rgb("===t.substr(0,4)){var e=t.match(/\d+/g);U[t]=["#",K[e[0]],K[e[1]],K[e[2]]].join("")}else U[t]=t;return U[t]},start:function(t,e,i){var r;if(_.init(),t.getContext)r=t.getContext("2d");else{var s=e;if(this.enable[s]||(s=this.current),!s||!this.enable[s])throw"No canvas environment is installed";(r=new X[s](t)).init()}i&&i(r)}};class Q{constructor(t){for(var e of F)this[e]=e===t}}var Y=function(){if(Z.isWrapperEnable){var t=Z.wrapperType;F.push(t),J.enable[t]=!0,J.current||(J.current=t),X[t]=Z.WrapperClass,Z.WrapperClass.prototype.getTypeList=()=>new Q(t)}};for(var Z of[O,q])Y();e.default=J}]).default;export default Candle;